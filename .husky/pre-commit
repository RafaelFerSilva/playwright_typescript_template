#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Executando pre-commit hooks..."

# 1. Lint + Format
echo "ğŸ“ Executando lint e formataÃ§Ã£o nos arquivos staged..."
npx lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ Lint/formataÃ§Ã£o falhou."
  exit 1
fi

# 2. CompilaÃ§Ã£o do TypeScript
echo "ğŸ”§ Verificando compilaÃ§Ã£o TypeScript..."
npm run pretest
if [ $? -ne 0 ]; then
  echo "âŒ CompilaÃ§Ã£o TypeScript falhou."
  exit 1
fi

echo "âœ… Pre-commit finalizado com sucesso!"
