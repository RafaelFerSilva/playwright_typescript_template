#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🚀 Executando pre-commit hooks..."

# 1. Lint + Format
echo "📝 Executando lint e formatação nos arquivos staged..."
npx lint-staged
if [ $? -ne 0 ]; then
  echo "❌ Lint/formatação falhou."
  exit 1
fi

# 2. Compilação do TypeScript
echo "🔧 Verificando compilação TypeScript..."
npm run pretest
if [ $? -ne 0 ]; then
  echo "❌ Compilação TypeScript falhou."
  exit 1
fi

echo "✅ Pre-commit finalizado com sucesso!"
